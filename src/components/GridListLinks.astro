---
import { Icon } from 'astro-icon/components';
import ExperienceList from '@/EN/Experience';
import ProyectList from '@/EN/Project';
import SkillList from '@/EN/Skill';
import PresentationList from '@/data/EN/Presentation';
import PresentationListES from '@/data/ES/Presentation';
import LanguageSwitcher from './LanguageSwitcher.astro';
import ThemeSwitcher from './ThemeSwitcher.astro';
const lang = Astro.url.pathname.split('/')[1];
---

<div
  class="dark:bg-bgPrimary flex items-center justify-center"
>
  <div
    class="dark:bg-bgPrimary border border-black dark:border-white h-12 flex items-center w-[95%] mr-1"
  >
    <div
      class="w-[75%] grid grid-flow-col place-items-center gap-3"
    >
      <span class="cursor-pointer">
        <button
          class="text-[18px]"
          onclick="window.open('/static/pdf/CV-2025.pdf', '_blank');"
        >
          Resume
        </button>
      </span>
      <LanguageSwitcher />
      <ThemeSwitcher />
    </div>
  </div>
</div>
<div
  class="grid grid-rows-10 grid-flow-col xl:w-[30%] lg:w-[40%] md:w-[60%] bg-opacity-30 backdrop-blur-lg dark:bg-bgPrimary bg-white"
>
  <div class="col-span-3 p-2 overflow-y-scroll">
    <div
      class="relative dark:border-white border-black w-full h-full border-[1px]"
    >
      <div class="relative">
        <span class="absolute z-10 -top-3 left-2 h-1 px-3"
          >Home
          <div
            class="-z-10 absolute top-[9.5px] w-[73%] h-1 dark:bg-bgPrimary bg-white"
          >
          </div>
        </span>
      </div>
      <div class="pl-2 overflow-y-auto max-h-[60vh] h-full">
        {
          lang === 'en'
            ? PresentationList.map((exp) => (
                <button
                  class="cursor-pointer no-underline text-white "
                  onclick={`window.location.reload()`}
                >
                  <div class="flex items-center  h-full w-[100%] text-wrap leading-[16px] text-black dark:text-customGray cursor-pointer">
                    <p class="text-[16px] text-left pt-3 max-2xl:text-[14px]">
                      {exp.tag}
                    </p>
                  </div>
                </button>
              ))
            : PresentationListES.map((exp) => (
                <button
                  class="cursor-pointer no-underline text-white "
                  onclick={`window.location.reload()`}
                >
                  <div class="flex items-center h-full w-[100%] text-wrap leading-[16px] text-black dark:text-customGray cursor-pointer">
                    <p class="text-[16px] text-left pt-3 max-2xl:text-[14px]">
                      {exp.tag}
                    </p>
                  </div>
                </button>
              ))
        }
      </div>
    </div>
  </div>
  <div
    class="col-span-3 p-2 row-span-3 overflow-y-scroll h-[25vh]"
  >
    <div
      class="relative w-full h-full dark:border-white border-gray-950 border-[1px] dark:border"
    >
      <div class="relative">
        <span class="absolute z-10 -top-3 left-2 h-1 px-2"
          >Experience
          <div
            class="-z-10 absolute top-[9.5px] w-[86%] h-1 dark:bg-bgPrimary bg-white"
          >
          </div>
        </span>
      </div>
      <div
        class="w-full relative h-full flex-grow pt-3 overflow-y-scroll"
      >
        <div class="flex flex-col pl-1 gap-1">
          {
            ExperienceList.map((exp) => (
              <a
                href={`/${lang}/experience/${exp.id}`}
                class="py-1 pl-1 lg:pl-3 cursor-pointer no-underline hover:bg-hoverBtn visited:bg-selectBtn"
                hx-get={`/${lang}/experience/${exp.id}`}
                hx-target="#content"
                hx-on="click: setActive(this)"
                data-id={`experience-${exp.id}`}
              >
                <div class="w-[100%] text-wrap flex leading-[19px] dark:text-customGray cursor-pointer hover:text-white">
                  <div class="w-[50%] flex items-center">
                    <ul>
                      <li>
                        <p>{exp.title}</p>
                      </li>
                    </ul>
                  </div>
                  <div class="w-[15%] grid place-items-center">
                    @
                  </div>
                  <div class="w-[35%] flex items-center">
                    {exp.position}
                  </div>
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
  <div
    class="col-span-3 p-2 row-span-3 overflow-y-scroll h-[25vh]"
  >
    <div
      class="relative w-full h-full dark:border-white border-gray-950 border-[1px] dark:border"
    >
      <div class="relative">
        <span class="absolute z-10 -top-3 left-2 h-1 px-2"
          >Projects
          <div
            class="-z-10 absolute top-[10px] w-[83%] h-1 dark:bg-bgPrimary bg-white"
          >
          </div>
        </span>
      </div>
      <div
        class="relative h-full flex-grow pt-3 overflow-y-scroll"
      >
        <div class="flex flex-col pl-1 gap-1">
          {
            ProyectList.map((prj) => (
              <a
                href={`/${lang}/project/${prj.id}`}
                class="py-1 pl-3 cursor-pointer no-underline hover:bg-hoverBtn"
                hx-get={`/${lang}/project/${prj.id}`}
                hx-target="#content"
              >
                <div class="w-[100%] text-wrap flex leading-[19px] dark:text-customGray cursor-pointer hover:text-white">
                  <div class="w-[50%] flex items-center">
                    <ul>
                      <li>
                        <p>{prj.title}</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
  <div
    class="col-span-3 p-2 row-span-3 overflow-y-scroll h-[25vh]"
  >
    <div
      class="relative w-full h-full dark:border-white border-gray-950 border-[1px] dark:border"
    >
      <div class="relative">
        <span class="absolute z-10 -top-3 left-2 h-1 px-3"
          >Skill - Tools
          <div
            class="-z-10 absolute top-[10px] w-[83%] h-1 dark:bg-bgPrimary bg-white"
          >
          </div>
        </span>
      </div>
      <div
        class="relative h-full flex-grow pt-3 overflow-y-scroll"
      >
        <div class="flex flex-col pl-1 gap-1">
          {
            SkillList.map((skl) => (
              <a
                href={`/${lang}/skill/${skl.id}`}
                class="py-1 pl-3 cursor-pointer no-underline over:bg-hoverBtn visited:bg-selectBtn hover:bg-hoverBtn"
                hx-get={`/${lang}/skill/${skl.id}`}
                hx-target="#content"
              >
                <div class="w-[100%] text-wrap flex leading-[19px] dark:text-customGray cursor-pointer hover:text-white">
                  <div class="w-[50%] flex items-center">
                    <ul>
                      <li class="flex gap-2">
                        <Icon name={skl.icon} />
                        <p>{skl.title}</p>
                      </li>
                    </ul>
                  </div>
                </div>
              </a>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  let isOpen = true;

  // Escuchar el clic en el icono de menÃº
  document
    .getElementById('menu-icon')
    ?.addEventListener('click', () => {
      const menuContent = document.getElementById('menu');
      if (menuContent) {
        menuContent.style.display = isOpen
          ? 'block'
          : 'none';
      }
    });
</script>
